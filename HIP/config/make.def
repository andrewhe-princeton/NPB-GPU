# ---------------------------------------------------------------------------
# Items in this file will need to be changed for each platform.
# ---------------------------------------------------------------------------

# ---------------------------------------------------------------------------
# Parallel C:
#
# CC         - C compiler 
# CFLAGS     - C compilation arguments
# C_INC      - any -I arguments required for compiling C 
# CLINK      - C linker
# CLINKFLAGS - C linker flags
# C_LIB      - any -L and -l arguments required for linking C 
#
# compilations are done with $(CC) $(C_INC) $(CFLAGS) or
#                            $(CC) $(CFLAGS)
# linking is done with       $(CLINK) $(C_LIB) $(CLINKFLAGS)
# ---------------------------------------------------------------------------

# ---------------------------------------------------------------------------
# Array memory organization
# ---------------------------------------------------------------------------
NO_NPB_CPP_CONVENTIONS = -DDO_NOT_ALLOCATE_ARRAYS_WITH_DYNAMIC_MEMORY_AND_AS_SINGLE_DIMENSION

# ---------------------------------------------------------------------------
# HIP path
# ---------------------------------------------------------------------------
ROCM_PATH=/opt/rocm-6.3.1/
HIP_COMPILER=$(ROCM_PATH)/bin/hipcc

# ---------------------------------------------------------------------------
# CC is the compiler used for HIP programs
# ---------------------------------------------------------------------------
CC = ${HIP_COMPILER}

# ---------------------------------------------------------------------------
# Choose a GPU vendor using the options: amd, nvidia, or intel
# ---------------------------------------------------------------------------
export HIP_PLATFORM=amd

# ---------------------------------------------------------------------------
# HIP compiler for Intel GPUs (ChipStar)
# ---------------------------------------------------------------------------
export CHIP_BE=level0
INTEL_CHIPSTAR=~/intel-stuff/chipStar-v1.2.1/
CC_INTEL = ${INTEL_CHIPSTAR}/build/bin/hipcc

# ---------------------------------------------------------------------------
# Execute these commands before running the NPB for Intel GPUs
# ---------------------------------------------------------------------------
# export CHIP_BE=level0

# ---------------------------------------------------------------------------
# Other commands regarding ChipStar
# ---------------------------------------------------------------------------
# INTEL_CHIPSTAR=~/intel-stuff/chipStar-v1.2.1/
# export CHIP_DEVICE_TYPE=GPU
# export CHIP_BE=level0
# export PATH=${INTEL_CHIPSTAR}/build/bin:$PATH
# export LD_LIBRARY_PATH=${INTEL_CHIPSTAR}/build/lib:$LD_LIBRARY_PATH

# ---------------------------------------------------------------------------
# GPU vendor flags
# ---------------------------------------------------------------------------
AMD_FLAGS = -fopenmp -O3
NVIDIA_FLAGS = -Xcompiler -fopenmp -Xcompiler -O3
INTEL_FLAGS = -O3

# ---------------------------------------------------------------------------
# in case HIP does not recognize nvcc path
# ---------------------------------------------------------------------------
# sudo mkdir -p /usr/local/cuda/bin
# sudo ln -s /usr/bin/nvcc /usr/local/cuda/bin/nvcc

# ---------------------------------------------------------------------------
# This links C programs; usually the same as ${CC}
# ---------------------------------------------------------------------------
CLINK = $(CC)

# ---------------------------------------------------------------------------
# These macros are passed to the linker 
# ---------------------------------------------------------------------------
C_LIB = -lm 

# ---------------------------------------------------------------------------
# These macros are passed to the compiler 
# ---------------------------------------------------------------------------
C_INC = -I../common 

# ---------------------------------------------------------------------------
# Global *compile time* flags for C programs
# ---------------------------------------------------------------------------
CFLAGS = -O3

# ---------------------------------------------------------------------------
# Global *link time* flags. Flags for increasing maximum executable 
# size usually go here. 
# ---------------------------------------------------------------------------
CLINKFLAGS = -O3

# ---------------------------------------------------------------------------
# Destination of executables, relative to subdirs of the main directory. 
# ---------------------------------------------------------------------------
BINDIR = ../bin

# ---------------------------------------------------------------------------
# Parameters folder. 
# ---------------------------------------------------------------------------
SYSDIR = ../sys

# ---------------------------------------------------------------------------
# The variable RAND controls which random number generator 
# is used. It is described in detail in Doc/README.install. 
# Use "randi8" unless there is a reason to use another one. 
# Other allowed values are "randi8_safe", "randdp" and "randdpvec"
# ---------------------------------------------------------------------------
# RAND = randi8
# The following is highly reliable but may be slow:
RAND = randdp
