# ---------------------------------------------------------------------------
# Items in this file will need to be changed for each platform.
# ---------------------------------------------------------------------------

# ---------------------------------------------------------------------------
# Parallel C:
#
# CC         - C compiler 
# CFLAGS     - C compilation arguments
# C_INC      - any -I arguments required for compiling C 
# CLINK      - C linker
# CLINKFLAGS - C linker flags
# C_LIB      - any -L and -l arguments required for linking C 
#
# compilations are done with $(CC) $(C_INC) $(CFLAGS) or
#                            $(CC) $(CFLAGS)
# linking is done with       $(CLINK) $(C_LIB) $(CLINKFLAGS)
# ---------------------------------------------------------------------------

# ---------------------------------------------------------------------------
# arrays' organization
# ---------------------------------------------------------------------------
NO_NPB_CPP_CONVENTIONS = -DDO_NOT_ALLOCATE_ARRAYS_WITH_DYNAMIC_MEMORY_AND_AS_SINGLE_DIMENSION

# ---------------------------------------------------------------------------
# HIP path
# ---------------------------------------------------------------------------
ROCM_PATH=/opt/rocm-6.3.1/
HIP_COMPILER=$(ROCM_PATH)/bin/hipcc

# ---------------------------------------------------------------------------
# CC is the compiler used for HIP programs
# ---------------------------------------------------------------------------
CC = ${HIP_COMPILER}

##################
# choose AMD GPU #
##################
export HIP_PLATFORM=amd

#####################
# choose NVIDIA GPU #
#####################
# export HIP_PLATFORM=nvidia

###################
# chose INTEL GPU #
###################
# export HIP_PLATFORM=intel
# INTEL_ONEAPI=~/intel-stuff/intel/oneapi/
# INTEL_CHIPSTAR=~/intel-stuff/chipStar-v1.2.1/
# source ${INTEL_ONEAPI}/setvars.sh --force
# export HIP_PLATFORM=chipstar
# export CHIP_DEVICE_TYPE=GPU
# export CHIP_BE=level0
# export PATH=${INTEL_CHIPSTAR}/build/bin:$PATH
# export LD_LIBRARY_PATH=${INTEL_CHIPSTAR}/build/lib:$LD_LIBRARY_PATH
# export IGC_EnableDPEmulation=1
# export OverrideDefaultFP64Settings=1
# CC = ${INTEL_CHIPSTAR}/build/bin/hipcc

# ---------------------------------------------------------------------------
# GPU vendor flags
# ---------------------------------------------------------------------------
AMD_FLAGS = -fopenmp -O3
NVIDIA_FLAGS = -Xcompiler -fopenmp -Xcompiler -O3
INTEL_FLAGS = 

# ---------------------------------------------------------------------------
# in case HIP does not recognize nvcc path
# ---------------------------------------------------------------------------
# sudo mkdir -p /usr/local/cuda/bin
# sudo ln -s /usr/bin/nvcc /usr/local/cuda/bin/nvcc

# ---------------------------------------------------------------------------
# This links C programs; usually the same as ${CC}
# ---------------------------------------------------------------------------
CLINK = $(CC)

# ---------------------------------------------------------------------------
# These macros are passed to the linker 
# ---------------------------------------------------------------------------
C_LIB = -lm 

# ---------------------------------------------------------------------------
# These macros are passed to the compiler 
# ---------------------------------------------------------------------------
C_INC = -I../common 

# ---------------------------------------------------------------------------
# Global *compile time* flags for C programs
# ---------------------------------------------------------------------------
CFLAGS = -O3

# ---------------------------------------------------------------------------
# Global *link time* flags. Flags for increasing maximum executable 
# size usually go here. 
# ---------------------------------------------------------------------------
CLINKFLAGS = -O3

# ---------------------------------------------------------------------------
# Destination of executables, relative to subdirs of the main directory. 
# ---------------------------------------------------------------------------
BINDIR = ../bin

# ---------------------------------------------------------------------------
# Parameters folder. 
# ---------------------------------------------------------------------------
SYSDIR = ../sys

# ---------------------------------------------------------------------------
# The variable RAND controls which random number generator 
# is used. It is described in detail in Doc/README.install. 
# Use "randi8" unless there is a reason to use another one. 
# Other allowed values are "randi8_safe", "randdp" and "randdpvec"
# ---------------------------------------------------------------------------
# RAND = randi8
# The following is highly reliable but may be slow:
RAND = randdp

# ---------------------------------------------------------------------------
# The variable WTIME is the name of the wtime source code module in the
# NPB2.x/common directory.  
# For most machines,       use wtime.c
# For SGI power challenge: use wtime_sgi64.c
# ---------------------------------------------------------------------------
WTIME = wtime.cpp

# ---------------------------------------------------------------------------
# Enable if either Cray or IBM: 
# (no such flag for most machines: see common/wtime.h)
# This is used by the C compiler to pass the machine name to common/wtime.h,
# where the C/Fortran binding interface format is determined
# ---------------------------------------------------------------------------
# MACHINE = -DCRAY
# MACHINE = -DIBM
